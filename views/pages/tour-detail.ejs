<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
     <%- include('../partials/head', { 
          title: `${tour.title} | Morocco Travel Experts`,
          metaDescription: `Experience ${tour.title}. ${tour.duration} days from ${tour.startLocation}. Book now!`,
          metaKeywords: `morocco tours, ${tour.startLocation} tours, morocco travel, ${tour.duration} day tours, ${tour.title}`,
          canonicalUrl: `https://moroccotravelexperts.com/tours/${tour.slug}`,
          ogImage: tour.mainImage,
          ogImageAlt: `${tour.title} - Experience Morocco Travel`,
          ogType: 'product',
          price: tour.price,
          currency: 'USD',
          availability: 'instock',
          tourDuration: tour.duration
     }) %>
     
     <style>
          html {
               scroll-behavior: smooth;
               scroll-padding-top: 70px;
          }
          .hide-scrollbar {
               -ms-overflow-style: none;
               scrollbar-width: none;
          }
          .hide-scrollbar::-webkit-scrollbar {
               display: none;
          }
          .section-heading {
               font-size: 2rem;
               font-weight: 700;
               letter-spacing: -0.025em;
               position: relative;
               display: inline-block;
          }
          .section-heading::after {
               content: "";
               display: block;
               width: 100%;
               height: 3px;
               background: linear-gradient(to right, #f97316, transparent);
               margin-top: 0.5rem;
          }
          .content-container {
               max-width: 800px;
               margin-left: auto;
               margin-right: auto;
               padding: 0 20px;
          }
          .card-fresh {
               background-color: white;
               border-radius: 0.5rem;
               box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
               border: 1px solid #f0f0f0;
               transition: transform 0.3s ease, box-shadow 0.3s ease;
          }
          .card-fresh:hover {
               transform: translateY(-5px);
               box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
          }
          .timeline-connector {
               position: absolute;
               left: 8px;
               top: 0;
               bottom: 0;
               width: 2px;
               background: repeating-linear-gradient(
                    to bottom,
                    #f97316 0,
                    #f97316 6px,
                    transparent 6px,
                    transparent 12px
               );
          }
          .timeline-dot {
               position: relative;
               z-index: 10;
          }
          .timeline-dot::before {
               content: "";
               position: absolute;
               top: 50%;
               left: -20px;
               transform: translateY(-50%);
               width: 10px;
               height: 10px;
               border-radius: 50%;
               background-color: #f97316;
               box-shadow: 0 0 0 4px rgba(249, 115, 22, 0.2);
          }
          .img-hover-zoom {
               overflow: hidden;
          }
          .img-hover-zoom img {
               transition: transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
          }
          .img-hover-zoom:hover img {
               transform: scale(1.1);
          }
          .accent-bar {
               border-top: 4px solid;
               border-image: linear-gradient(to right, #f97316, #fb923c, #fed7aa) 1;
          }
          .day-card-content {
               transform: translateY(10px);
               opacity: 0;
               transition: all 0.3s ease;
          }
          .day-card:hover .day-card-content {
               transform: translateY(0);
               opacity: 1;
          }
          @media (max-width: 768px) {
               .day-card-content {
                    transform: none;
                    opacity: 1;
               }
               .content-container {
                    padding: 0 16px;
               }
          }
     </style>
</head>

<body class="bg-gray-50 font-sans text-gray-800">
     <%- include('../partials/header') %>

     <!-- Simple Header Section (replacing hero) -->
     <section class="py-12 bg-gray-100 border-b border-gray-200">
          <div class="content-container">
               <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-6">
                    <div>
                         <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-3">
                              <%= tour.title %>
                         </h1>
                         <div class="flex flex-wrap items-center gap-x-6 gap-y-2 text-gray-600">
                              <div class="flex items-center gap-2">
                                   <i class="fas fa-clock text-orange-500"></i>
                                   <span><%= tour.duration %> Days</span>
                              </div>
                              <div class="flex items-center gap-2">
                                   <i class="fas fa-map-marker-alt text-orange-500"></i>
                                   <span><%= tour.startLocation %></span>
                              </div>
                              <div class="flex items-center gap-2">
                                   <i class="fas fa-users text-orange-500"></i>
                                   <span>Max <%= tour.groupSize %></span>
                              </div>
                         </div>
                    </div>
                    <div class="flex flex-col sm:flex-row gap-3">
                         <a href="#booking" class="px-6 py-3 bg-orange-500 text-white font-medium rounded-md hover:bg-orange-600 transition-colors shadow-md text-center">
                              Book Tour
                         </a>
                         <a href="mailto:book@moroccotravelexperts.com" class="px-6 py-3 bg-blue-500 text-white font-medium rounded-md hover:bg-blue-600 transition-colors shadow-md text-center">
                              Email Booking
                         </a>
                    </div>
               </div>
          </div>
     </section>
     
     <!-- Quick Navigation -->
     <div class="sticky top-0 bg-white shadow-md z-30 py-0">
          <div class="content-container">
               <div class="flex overflow-x-auto hide-scrollbar justify-center">
                    <a href="#overview" class="px-5 py-4 text-gray-600 hover:text-orange-500 border-b-2 border-transparent hover:border-orange-500 transition-colors whitespace-nowrap font-medium">Overview</a>
                    <a href="#itinerary" class="px-5 py-4 text-gray-600 hover:text-orange-500 border-b-2 border-transparent hover:border-orange-500 transition-colors whitespace-nowrap font-medium">Itinerary</a>
                    <a href="#gallery" class="px-5 py-4 text-gray-600 hover:text-orange-500 border-b-2 border-transparent hover:border-orange-500 transition-colors whitespace-nowrap font-medium">Gallery</a>
                    <a href="#includes" class="px-5 py-4 text-gray-600 hover:text-orange-500 border-b-2 border-transparent hover:border-orange-500 transition-colors whitespace-nowrap font-medium">Includes/Excludes</a>
                    <a href="#booking" class="px-5 py-4 text-gray-600 hover:text-orange-500 border-b-2 border-transparent hover:border-orange-500 transition-colors whitespace-nowrap font-medium">Book</a>
                    <a href="mailto:book@moroccotravelexperts.com" class="px-5 py-4 text-gray-600 hover:text-orange-500 border-b-2 border-transparent hover:border-orange-500 transition-colors whitespace-nowrap font-medium">
                         <i class="fas fa-envelope mr-2"></i>Email Us
                    </a>
               </div>
          </div>
     </div>

     <!-- Overview Section -->
     <section id="overview" class="py-20 bg-white">
          <div class="content-container">
               <h2 class="section-heading mb-12">Tour Overview</h2>
               
               <div class="space-y-10">
                    <!-- Description -->
                    <div class="card-fresh p-8">
                         <div class="prose prose-lg max-w-none">
                              <%= tour.description %>
                         </div>
                    </div>
                    
                    <!-- Highlights Card -->
                    <% if (tour.highlights && tour.highlights.length) { %>
                    <div class="card-fresh p-8 accent-bar">
                         <h3 class="text-xl font-semibold mb-6 flex items-center gap-2">
                              <i class="fas fa-star text-orange-500"></i>
                              Tour Highlights
                         </h3>
                         <div class="grid sm:grid-cols-2 gap-5">
                              <% tour.highlights.forEach(highlight => { %>
                              <div class="flex items-start gap-3">
                                   <div class="text-orange-500 mt-1 text-lg"><i class="fas fa-check-circle"></i></div>
                                   <p class="text-gray-700"><%= highlight %></p>
                              </div>
                              <% }) %>
                         </div>
                    </div>
                    <% } %>
                    
                    <!-- Map -->
                    <% if (tour.mapImage) { %>
                    <div class="card-fresh p-8 accent-bar">
                         <h3 class="text-xl font-semibold mb-6 flex items-center gap-2">
                              <i class="fas fa-map text-orange-500"></i>
                              Tour Route Map
                         </h3>
                         <div class="img-hover-zoom rounded-lg overflow-hidden">
                              <img src="<%= tour.mapImage %>" alt="Tour route map" class="w-full rounded-lg shadow-md">
                         </div>
                    </div>
                    <% } %>
                    
                    <!-- Tour Details Card -->
                    <div class="card-fresh p-8 accent-bar">
                         <h3 class="text-xl font-semibold mb-6">Essential Details</h3>
                         
                         <div class="grid md:grid-cols-2 gap-6">
                              <div class="space-y-4">
                                   <div class="flex justify-between border-b pb-3">
                                        <span class="text-gray-600">Price:</span>
                                        <span class="font-medium">Contact for pricing</span>
                                   </div>
                                   <div class="flex justify-between border-b pb-3">
                                        <span class="text-gray-600">Duration:</span>
                                        <span class="font-medium"><%= tour.duration %> Days</span>
                                   </div>
                                   <div class="flex justify-between">
                                        <span class="text-gray-600">Group Size:</span>
                                        <span class="font-medium">Max <%= tour.groupSize %></span>
                                   </div>
                              </div>
                              
                              <div class="space-y-4">
                                   <div class="flex justify-between border-b pb-3">
                                        <span class="text-gray-600">Starting Point:</span>
                                        <span class="font-medium"><%= tour.startLocation %></span>
                                   </div>
                                   <div class="flex justify-between border-b pb-3">
                                        <span class="text-gray-600">Accommodation:</span>
                                        <span class="font-medium"><%= tour.accommodation %></span>
                                   </div>
                                   <div class="flex justify-between items-center">
                                        <span class="text-gray-600">Rating:</span>
                                        <div class="flex items-center">
                                             <span class="font-medium mr-2"><%= tour.rating %>/5</span>
                                             <div class="flex text-yellow-400">
                                                  <% for(let i = 0; i < Math.floor(tour.rating); i++) { %>
                                                       <i class="fas fa-star"></i>
                                                  <% } %>
                                                  <% if(tour.rating % 1 >= 0.5) { %>
                                                       <i class="fas fa-star-half-alt"></i>
                                                  <% } %>
                                             </div>
                                        </div>
                                   </div>
                              </div>
                         </div>
                         
                         <div class="grid grid-cols-1 gap-4 mt-8">
                              <a href="#booking" class="block w-full py-3 bg-orange-500 text-white text-center rounded-md font-medium hover:bg-orange-600 transition-colors">
                                   Book Now
                              </a>
                         </div>
                    </div>
                    
                    <!-- Direct Booking Card -->
                    <div class="card-fresh p-8 accent-bar bg-blue-50">
                         <h3 class="text-xl font-semibold mb-4 flex items-center gap-2">
                              <i class="fas fa-envelope text-blue-500"></i>
                              Direct Booking Option
                         </h3>
                         <p class="mb-4 text-gray-600">
                              Prefer to request a booking via email? Contact our booking department directly:
                         </p>
                         <a href="mailto:book@moroccotravelexperts.com" class="block w-full py-3 bg-blue-500 text-white text-center rounded-md font-medium hover:bg-blue-600 transition-colors">
                              book@moroccotravelexperts.com
                         </a>
                    </div>
               </div>
          </div>
     </section>

     <!-- Itinerary Section -->
     <section id="itinerary" class="py-20 bg-gray-50">
          <div class="content-container">
               <h2 class="section-heading mb-12">Day by Day Itinerary</h2>
               
               <div class="relative pl-8 md:pl-12">
                    <!-- Timeline connector -->
                    <div class="timeline-connector"></div>
                    
                    <div class="space-y-8">
                         <% tour.itinerary.forEach((day, index) => { %>
                         <div class="day-card relative timeline-dot">
                              <div class="card-fresh overflow-hidden">
                                   <!-- Day header -->
                                   <div class="collapse-header cursor-pointer w-full flex items-center gap-4 p-6" onclick="toggleCollapse(this)">
                                        <div class="w-14 h-14 rounded-full bg-orange-100 text-orange-500 flex items-center justify-center font-bold text-xl flex-shrink-0 relative z-10 border-2 border-white">
                                             <%= day.day %>
                                        </div>
                                        <div class="flex-grow">
                                             <h3 class="text-xl font-semibold"><%= day.title %></h3>
                                             <% if(day.distance) { %>
                                             <p class="text-gray-500 text-sm">Distance: <%= day.distance %></p>
                                             <% } %>
                                        </div>
                                        <div class="text-gray-400 transform transition-transform duration-300">
                                             <i class="fas fa-chevron-down"></i>
                                        </div>
                                   </div>
                                   
                                   <!-- Day content -->
                                   <div class="collapse-content hidden px-6 pb-6 day-card-content">
                                        <div class="pl-0 md:pl-14">
                                             <div class="prose text-gray-600 mb-4">
                                                  <%= day.description %>
                                             </div>
                                             
                                             <% if (day.highlights && day.highlights.length > 0) { %>
                                             <div class="mt-6 bg-orange-50 p-4 rounded-md">
                                                  <h4 class="font-medium text-gray-800 mb-3 flex items-center gap-2">
                                                       <i class="fas fa-lightbulb text-orange-500"></i>
                                                       Day Highlights
                                                  </h4>
                                                  <div class="flex flex-wrap gap-2">
                                                       <% day.highlights.forEach(highlight => { %>
                                                       <span class="px-3 py-1 bg-white text-orange-700 rounded-md text-sm border border-orange-200">
                                                            <%= highlight %>
                                                       </span>
                                                       <% }) %>
                                                  </div>
                                             </div>
                                             <% } %>
                                        </div>
                                   </div>
                              </div>
                         </div>
                         <% }) %>
                    </div>
               </div>
          </div>
     </section>

     <!-- Gallery Section -->
     <section id="gallery" class="py-20 bg-white">
          <div class="content-container">
               <h2 class="section-heading mb-12">Tour Gallery</h2>
               
               <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <% tour.images.forEach((image, index) => { %>
                    <div class="img-hover-zoom rounded-lg shadow-md overflow-hidden">
                         <img 
                              src="<%= image %>" 
                              alt="<%= tour.title %> - View <%= index + 1 %>" 
                              class="w-full h-64 object-cover"
                         >
                    </div>
                    <% }) %>
               </div>
          </div>
     </section>

     <!-- Includes & Excludes Section -->
     <section id="includes" class="py-20 bg-gray-50">
          <div class="content-container">
               <h2 class="section-heading mb-12">What's Included</h2>
               
               <div class="space-y-8">
                    <div class="card-fresh p-8 accent-bar">
                         <h3 class="text-xl font-semibold mb-6 flex items-center gap-2">
                              <i class="fas fa-check-circle text-green-500"></i>
                              Included in This Tour
                         </h3>
                         <ul class="space-y-4">
                              <% tour.includes.forEach(item => { %>
                              <li class="flex items-start gap-3">
                                   <div class="text-green-500 mt-1"><i class="fas fa-check"></i></div>
                                   <span class="text-gray-700"><%= item %></span>
                              </li>
                              <% }) %>
                         </ul>
                    </div>
                    
                    <div class="card-fresh p-8 accent-bar">
                         <h3 class="text-xl font-semibold mb-6 flex items-center gap-2">
                              <i class="fas fa-times-circle text-red-500"></i>
                              Not Included
                         </h3>
                         <ul class="space-y-4">
                              <% tour.excludes.forEach(item => { %>
                              <li class="flex items-start gap-3">
                                   <div class="text-red-500 mt-1"><i class="fas fa-times"></i></div>
                                   <span class="text-gray-700"><%= item %></span>
                              </li>
                              <% }) %>
                         </ul>
                    </div>
               </div>
          </div>
     </section>

     <!-- Booking Section -->
     <section id="booking" class="py-20 bg-white">
          <div class="content-container">
               <h2 class="section-heading mb-12">Book This Tour</h2>
               
               <div class="space-y-10">
                    <!-- Booking Options Cards -->
                    <div class="grid md:grid-cols-2 gap-6">
                         <div class="card-fresh overflow-hidden">
                              <div class="h-2 bg-orange-500"></div>
                              <div class="p-6">
                                   <h3 class="text-xl font-semibold mb-4">Standard Tour</h3>
                                   <p class="text-gray-600 mb-6">
                                        Book the standard tour package with the itinerary as described.
                                   </p>
                                   <a href="#booking-form" class="block w-full py-3 bg-orange-500 text-white text-center rounded-md font-medium hover:bg-orange-600 transition-colors mt-auto">
                                        Book Standard
                                   </a>
                              </div>
                         </div>
                         
                         <div class="card-fresh overflow-hidden">
                              <div class="h-2 bg-blue-500"></div>
                              <div class="p-6">
                                   <h3 class="text-xl font-semibold mb-4">Email Booking</h3>
                                   <p class="text-gray-600 mb-6">
                                        Request a booking directly via email contact.
                                   </p>
                                   <a href="mailto:book@moroccotravelexperts.com" class="block w-full py-3 bg-blue-500 text-white text-center rounded-md font-medium hover:bg-blue-600 transition-colors mt-auto">
                                        Email Us
                                   </a>
                              </div>
                         </div>
                    </div>
                    
                    <!-- Booking Form -->
                    <div id="booking-form" class="card-fresh p-8">
                         <h3 class="text-xl font-semibold mb-6">Book Your Tour</h3>
                         
                         <form id="tourBookingForm" class="space-y-6">
                              <input type="hidden" name="tourId" value="<%= tour._id %>">
                              <input type="hidden" name="tourName" value="<%= tour.title %>">
                              
                              <!-- Customer Information -->
                              <div class="grid md:grid-cols-2 gap-6">
                                   <div>
                                        <label for="firstName" class="block text-gray-600 mb-2">First Name *</label>
                                        <input type="text" id="firstName" name="firstName" required
                                             class="w-full px-4 py-3 rounded-md border focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20">
                                   </div>
                                   <div>
                                        <label for="lastName" class="block text-gray-600 mb-2">Last Name *</label>
                                        <input type="text" id="lastName" name="lastName" required
                                             class="w-full px-4 py-3 rounded-md border focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20">
                                   </div>
                              </div>

                              <div class="grid md:grid-cols-2 gap-6">
                                   <div>
                                        <label for="email" class="block text-gray-600 mb-2">Email *</label>
                                        <input type="email" id="email" name="email" required
                                             class="w-full px-4 py-3 rounded-md border focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20">
                                   </div>
                                   <div>
                                        <label for="phone" class="block text-gray-600 mb-2">Phone Number *</label>
                                        <input type="tel" id="phone" name="phone" required
                                             class="w-full px-4 py-3 rounded-md border focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20">
                                   </div>
                              </div>

                              <!-- Booking Details -->
                              <div class="grid md:grid-cols-2 gap-6">
                                   <div>
                                        <label for="startDate" class="block text-gray-600 mb-2">Preferred Start Date *</label>
                                        <input type="date" id="startDate" name="startDate" required
                                             min="<%= new Date().toISOString().split('T')[0] %>"
                                             class="w-full px-4 py-3 rounded-md border focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20">
                                   </div>
                                   <div>
                                        <label for="groupSize" class="block text-gray-600 mb-2">Number of People *</label>
                                        <input type="number" id="groupSize" name="groupSize" min="1" max="<%= tour.groupSize %>" required
                                             class="w-full px-4 py-3 rounded-md border focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20">
                                   </div>
                              </div>

                              <div>
                                   <label for="specialRequests" class="block text-gray-600 mb-2">Special Requests</label>
                                   <textarea name="specialRequests" rows="4" 
                                        class="w-full px-4 py-3 rounded-md border focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20"></textarea>
                              </div>
                              
                              <!-- Form status messages -->
                              <div id="bookingFormStatus" class="hidden"></div>

                              <button type="submit" 
                                   class="w-full bg-orange-500 hover:bg-orange-600 text-white py-3 rounded-md font-medium shadow-md transition-colors">
                                   Book This Tour
                              </button>

                              <p class="text-sm text-gray-500 text-center">
                                   By booking, you agree to our <a href="/terms" class="text-orange-500 hover:underline">Terms & Conditions</a>
                              </p>
                         </form>
                    </div>
               </div>
          </div>
     </section>

     <!-- Related Tours Section -->
     <% if (relatedTours && relatedTours.length > 0) { %>
     <section class="py-20 bg-gray-50">
          <div class="content-container">
               <h2 class="section-heading mb-12">Similar Tours You Might Like</h2>
               
               <div class="grid md:grid-cols-2 gap-8">
                    <% relatedTours.forEach(relatedTour => { %>
                    <a href="/tours/<%= relatedTour.slug %>" class="group">
                         <div class="card-fresh h-full overflow-hidden">
                              <div class="img-hover-zoom aspect-video overflow-hidden">
                                   <img 
                                        src="<%= relatedTour.mainImage %>" 
                                        alt="<%= relatedTour.title %>" 
                                        class="w-full h-full object-cover"
                                   >
                              </div>
                              <div class="p-6">
                                   <div class="flex items-center justify-between text-sm text-gray-500 mb-2">
                                        <span class="flex items-center"><i class="fas fa-clock mr-2 text-orange-400"></i><%= relatedTour.duration %> Days</span>
                                        <span class="flex items-center"><i class="fas fa-map-marker-alt mr-2 text-orange-400"></i><%= relatedTour.startLocation %></span>
                                   </div>
                                   <h3 class="text-xl font-semibold mb-2 group-hover:text-orange-500 transition-colors"><%= relatedTour.title %></h3>
                                   <p class="text-gray-600 line-clamp-2"><%= relatedTour.description.substring(0, 100) %>...</p>
                              </div>
                         </div>
                    </a>
                    <% }) %>
               </div>
          </div>
     </section>
     <% } %>

     <!-- Back-to-top Button -->
     <button id="backToTop" class="fixed bottom-8 right-8 bg-orange-500 text-white p-4 rounded-full shadow-lg opacity-0 invisible transition-all duration-300 hover:bg-orange-600 focus:outline-none z-50">
          <i class="fas fa-arrow-up"></i>
     </button>
     
     <%- include('../partials/footer') %>
     
     <script>
          // Toggle collapse sections
          function toggleCollapse(element) {
               const content = element.nextElementSibling;
               const icon = element.querySelector('svg') || element.querySelector('i');
               
               if (content.style.display === 'block' || getComputedStyle(content).display === 'block') {
                    content.style.display = 'none';
                    if (icon) icon.style.transform = 'rotate(0deg)';
               } else {
                    content.style.display = 'block';
                    if (icon) icon.style.transform = 'rotate(180deg)';
               }
          }
          
          // Back to top button
          const backToTopButton = document.getElementById('backToTop');
          
          window.addEventListener('scroll', () => {
               if (window.scrollY > 300) {
                    backToTopButton.classList.remove('opacity-0', 'invisible');
                    backToTopButton.classList.add('opacity-100', 'visible');
               } else {
                    backToTopButton.classList.add('opacity-0', 'invisible');
                    backToTopButton.classList.remove('opacity-100', 'visible');
               }
          });
          
          backToTopButton.addEventListener('click', () => {
               window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
               });
          });
          
          // Add active class to navigation links based on scroll position
          const sections = document.querySelectorAll('section[id]');
          const navLinks = document.querySelectorAll('.nav-link');
          
          window.addEventListener('scroll', () => {
               let current = '';
               
               sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.clientHeight;
                    
                    if (window.scrollY >= (sectionTop - 200)) {
                         current = section.getAttribute('id');
                    }
               });
               
               navLinks.forEach(link => {
                    link.classList.remove('text-orange-500', 'border-orange-500');
                    link.classList.add('text-gray-600', 'border-transparent');
                    
                    if (link.getAttribute('href').includes(current)) {
                         link.classList.add('text-orange-500', 'border-orange-500');
                         link.classList.remove('text-gray-600', 'border-transparent');
                    }
               });
          });

          // Ajax form submission
          document.getElementById('tourBookingForm').addEventListener('submit', function(e) {
               e.preventDefault();
               
               // Show loading state
               const submitButton = this.querySelector('button[type="submit"]');
               const originalButtonText = submitButton.innerHTML;
               submitButton.disabled = true;
               submitButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Processing...';
               
               // Get form data
               const formData = new FormData(this);
               const formDataObject = Object.fromEntries(formData.entries());
               
               // Send Ajax request
               fetch('/bookings', {
                    method: 'POST',
                    headers: {
                         'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formDataObject)
               })
               .then(response => {
                    if (!response.ok) {
                         throw new Error('Network response was not ok');
                    }
                    return response.json();
               })
               .then(data => {
                    // Show success message
                    const statusDiv = document.getElementById('bookingFormStatus');
                    statusDiv.innerHTML = `
                         <div class="bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded relative">
                              <strong class="font-bold">Success!</strong>
                              <span class="block sm:inline"> Your booking request has been sent. We'll contact you shortly.</span>
                         </div>
                    `;
                    statusDiv.classList.remove('hidden');
                    
                    // Reset form
                    this.reset();
                    
                    // Scroll to status message
                    statusDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    
                    // Reset button
                    submitButton.disabled = false;
                    submitButton.innerHTML = originalButtonText;
               })
               .catch(error => {
                    // Show error message
                    const statusDiv = document.getElementById('bookingFormStatus');
                    statusDiv.innerHTML = `
                         <div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative">
                              <strong class="font-bold">Error!</strong>
                              <span class="block sm:inline"> There was a problem submitting your booking. Please try again or contact us directly.</span>
                         </div>
                    `;
                    statusDiv.classList.remove('hidden');
                    
                    // Scroll to status message
                    statusDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    
                    // Reset button
                    submitButton.disabled = false;
                    submitButton.innerHTML = originalButtonText;
                    
                    console.error('Error:', error);
               });
          });
     </script>
</body>
</html>